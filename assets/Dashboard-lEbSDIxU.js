import{c as R,u as ve,r as g,j as e,X as we,M as ye,A as Q,m as F,z as me}from"./index-saXMTLVF.js";import{S as j}from"./supabaseService-DZMz0YHo.js";import{U as G}from"./users-BfF57uDy.js";import{F as ie,B as ne,G as he}from"./globe-DqYvPLaw.js";import{D as H}from"./dollar-sign-mRV2hzXe.js";import{S as de,B as ue,L as oe,T}from"./trash-2-YAwQEz-h.js";import{T as ke}from"./trending-up-_EXyhvNM.js";import{M as q}from"./mail-CY8SAn_J.js";import{C as K}from"./circle-check-big-nkihLeeE.js";import{S as Ce}from"./search-BOMkrag2.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],ce=R("chart-no-axes-column",Se);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],E=R("circle-x",Pe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],V=R("rotate-ccw",Ae);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],xe=R("shield",De);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ze=R("triangle-alert",Le),_e=({partners:o,allLeads:p,applications:x,broadcastForm:l,setBroadcastForm:N,handlePostBroadcast:n,handleReviewApp:v,broadcasts:m,handleDeleteBroadcast:k})=>{const h=o.reduce((r,s)=>r+s.outreachLogs.reduce((c,A)=>c+A.count,0),0),w=o.reduce((r,s)=>{const A=(s.earningsHistory||[]).filter(d=>d.status==="paid"||d.status==="approved"||d.status==="pending").reduce((d,y)=>d+Number(y.dealValue||0),0);return r+A},0),t=p.filter(r=>r.payout_status==="pending"&&r.status==="Converted").reduce((r,s)=>r+(s.potential_commission||0),0),b=o.length;return e.jsxs("div",{className:"space-y-6 animate-fade-in pb-20",children:[e.jsx("h2",{className:"text-3xl font-display font-bold",children:"Command Center"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-surface border border-white/10 p-6 rounded-xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute right-0 top-0 p-4 opacity-5",children:e.jsx(G,{size:60})}),e.jsx("div",{className:"text-sm text-muted mb-1",children:"Active GPs"}),e.jsx("div",{className:"text-3xl font-bold",children:b})]}),e.jsxs("div",{className:"bg-surface border border-white/10 p-6 rounded-xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute right-0 top-0 p-4 opacity-5",children:e.jsx(ke,{size:60})}),e.jsx("div",{className:"text-sm text-muted mb-1",children:"Total Outreach"}),e.jsx("div",{className:"text-3xl font-bold",children:h.toLocaleString()})]}),e.jsxs("div",{className:"bg-surface border border-white/10 p-6 rounded-xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute right-0 top-0 p-4 opacity-5",children:e.jsx(H,{size:60})}),e.jsx("div",{className:"text-sm text-muted mb-1",children:"Attr. Revenue"}),e.jsxs("div",{className:"text-3xl font-bold text-green-400",children:["â‚¹",w.toLocaleString()]})]}),e.jsxs("div",{className:"bg-surface border border-white/10 p-6 rounded-xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute right-0 top-0 p-4 opacity-5",children:e.jsx(ze,{size:60})}),e.jsx("div",{className:"text-sm text-muted mb-1",children:"Liabilities"}),e.jsxs("div",{className:"text-3xl font-bold text-yellow-400",children:["â‚¹",t.toLocaleString()]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-surface border border-white/10 p-6 rounded-xl",children:[e.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[e.jsx(ue,{size:18})," Broadcast Notification"]}),e.jsxs("form",{onSubmit:n,className:"space-y-4 mb-8",children:[e.jsx("input",{value:l.title,onChange:r=>N({...l,title:r.target.value}),placeholder:"Notification Title",className:"w-full bg-background border border-white/10 p-3 rounded-lg",required:!0}),e.jsx("textarea",{value:l.message,onChange:r=>N({...l,message:r.target.value}),placeholder:"Message to all partners...",className:"w-full bg-background border border-white/10 p-3 rounded-lg h-24",required:!0}),e.jsx("button",{type:"submit",className:"bg-accent text-background px-4 py-2 rounded-lg font-bold w-full hover:bg-white text-sm",children:"Send Broadcast"})]}),e.jsx("h4",{className:"text-xs font-bold text-muted uppercase mb-3",children:"Recent Broadcasts"}),e.jsxs("div",{className:"space-y-2 max-h-40 overflow-y-auto no-scrollbar",children:[(!m||m.length===0)&&e.jsx("div",{className:"text-xs text-muted italic",children:"No active broadcasts."}),m==null?void 0:m.map(r=>e.jsxs("div",{className:"flex justify-between items-start bg-white/5 p-3 rounded-lg border border-white/5",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-bold",children:r.title}),e.jsx("div",{className:"text-xs text-muted truncate max-w-[200px]",children:r.message}),e.jsx("div",{className:"text-[10px] text-muted mt-1",children:new Date(r.created_at).toLocaleDateString()})]}),e.jsx("button",{onClick:()=>k(r.id),className:"text-muted hover:text-red-400 p-1",children:e.jsx(E,{size:14})})]},r.id))]})]}),e.jsxs("div",{className:"bg-surface border border-white/10 p-6 rounded-xl",children:[e.jsx("h3",{className:"font-bold mb-4",children:"Pending Applications"}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto pr-2 no-scrollbar",children:x.filter(r=>r.status==="pending").length===0?e.jsx("div",{className:"text-muted text-sm italic",children:"No pending apps."}):x.filter(r=>r.status==="pending").map(r=>e.jsxs("div",{className:"flex justify-between items-center bg-white/5 p-3 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-sm",children:r.fullName}),e.jsxs("div",{className:"text-xs text-muted",children:[r.city," â€¢ ",r.experience?"Exp":"No Exp"]}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[r.linkedin&&e.jsx("a",{href:r.linkedin,target:"_blank",rel:"noreferrer",className:"text-blue-400 hover:text-blue-300",title:"LinkedIn Profile",children:e.jsx(me,{size:14})}),r.social&&e.jsx("a",{href:r.social,target:"_blank",rel:"noreferrer",className:"text-pink-400 hover:text-pink-300",title:"Social Profile",children:e.jsx(he,{size:14})})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{const s="Application Approved - Frame n Flow Media GPP",c=`Hello ${r.fullName.split(" ")[0]},

We are pleased to accept you into the Growth Partner Program.

Please activate your account by creating your credentials here:
${window.location.origin}/#/growth-partner/signup

(This link allows you to set your password)

Welcome aboard,
Frame n Flow Media Team`;window.location.href=`mailto:${r.email}?subject=${encodeURIComponent(s)}&body=${encodeURIComponent(c)}`},className:"text-blue-400 p-1 hover:bg-blue-500/20 rounded",title:"Send Acceptance Email",children:e.jsx(q,{size:16})}),e.jsx("button",{onClick:()=>v(r.id,"approved"),className:"text-green-400 p-1 hover:bg-green-500/20 rounded",title:"Approve",children:e.jsx(K,{size:16})}),e.jsx("button",{onClick:()=>v(r.id,"rejected"),className:"text-red-400 p-1 hover:bg-red-500/20 rounded",title:"Reject",children:e.jsx(E,{size:16})})]})]},r.id))})]})]})]})},Te=({partners:o,searchQuery:p,setSearchQuery:x,applications:l,allLeads:N,getPartnerName:n,setSelectedPartner:v,handleDeletePartner:m})=>{const k=o.filter(h=>n(h.id).toLowerCase().includes(p.toLowerCase()));return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-3xl font-display font-bold",children:"Growth Partners"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ce,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted",size:16}),e.jsx("input",{value:p,onChange:h=>x(h.target.value),placeholder:"Search...",className:"bg-surface border border-white/10 pl-10 pr-4 py-2 rounded-lg text-sm w-64"})]})]}),e.jsx("div",{className:"bg-surface border border-white/10 rounded-xl overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-white/5 text-muted uppercase text-xs",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:"Partner"}),e.jsx("th",{className:"p-4",children:"Status"}),e.jsx("th",{className:"p-4 text-center",children:"Outreach"}),e.jsx("th",{className:"p-4 text-center",children:"Leads"}),e.jsx("th",{className:"p-4 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-white/5",children:k.map(h=>{const w=h.outreachLogs.reduce((b,r)=>b+r.count,0),t=N.filter(b=>b.partner_id===h.id).length;return e.jsxs("tr",{className:"hover:bg-white/5 transition-colors",children:[e.jsxs("td",{className:"p-4",children:[e.jsx("div",{className:"font-bold",children:n(h.id)}),e.jsx("div",{className:"text-xs text-muted",children:h.stage})]}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:"text-green-500 bg-green-500/10 px-2 py-1 rounded text-xs",children:"Active"})}),e.jsx("td",{className:"p-4 text-center font-mono",children:w}),e.jsx("td",{className:"p-4 text-center font-mono",children:t}),e.jsx("td",{className:"p-4 text-right",children:e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{onClick:()=>v(h),className:"p-2 bg-white/5 rounded hover:bg-white/10 text-xs font-bold",children:"View Profile"}),e.jsx("button",{onClick:()=>m(h.id,n(h.id)),className:"p-2 bg-red-500/10 text-red-400 rounded hover:bg-red-500/20 text-xs font-bold",title:"Delete Partner",children:e.jsx(T,{size:14})})]})})]},h.id)})})]})})]})},$e=({allLeads:o,getPartnerName:p,refreshData:x})=>e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-display font-bold",children:"All Leads & Deals"}),e.jsx("div",{className:"hidden md:block bg-surface border border-white/10 rounded-xl overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-white/5 text-muted uppercase text-xs",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:"Date"}),e.jsx("th",{className:"p-4",children:"Partner"}),e.jsx("th",{className:"p-4",children:"Business"}),e.jsx("th",{className:"p-4",children:"Source"}),e.jsx("th",{className:"p-4",children:"Status"}),e.jsx("th",{className:"p-4 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-white/5",children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"p-8 text-center text-muted",children:"No leads recorded."})}):o.map(l=>e.jsxs("tr",{className:"hover:bg-white/5",children:[e.jsx("td",{className:"p-4 text-muted text-xs",children:new Date(l.created_at).toLocaleDateString()}),e.jsx("td",{className:"p-4 font-bold",children:p(l.partner_id)}),e.jsxs("td",{className:"p-4",children:[e.jsx("div",{children:l.business_name}),e.jsx("div",{className:"text-xs text-muted",children:l.contact_person})]}),e.jsx("td",{className:"p-4 text-xs",children:l.source_platform}),e.jsxs("td",{className:"p-4",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs ${l.status==="Converted"?"bg-green-500/20 text-green-500":"bg-blue-500/10 text-blue-400"}`,children:l.status}),l.is_duplicate&&e.jsx("span",{className:"ml-2 bg-red-500/20 text-red-500 px-2 py-1 rounded text-xs",children:"Dupe"})]}),e.jsx("td",{className:"p-4 text-right",children:e.jsx("button",{onClick:async()=>{await j.updateLeadAdmin(l.id,{is_duplicate:!l.is_duplicate}),x()},className:"text-xs bg-white/5 px-2 py-1 rounded hover:bg-white/10",children:l.is_duplicate?"Un-Flag":"Flag Dupe"})})]},l.id))})]})}),e.jsx("div",{className:"md:hidden space-y-3",children:o.length===0?e.jsx("div",{className:"bg-surface border border-white/10 rounded-xl p-8 text-center text-muted",children:"No leads recorded."}):o.map(l=>e.jsxs("div",{className:"bg-surface border border-white/10 rounded-xl p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-base",children:l.business_name}),e.jsx("div",{className:"text-xs text-muted mt-1",children:l.contact_person})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs whitespace-nowrap ${l.status==="Converted"?"bg-green-500/20 text-green-500":"bg-blue-500/10 text-blue-400"}`,children:l.status}),l.is_duplicate&&e.jsx("span",{className:"bg-red-500/20 text-red-500 px-2 py-1 rounded text-xs",children:"Duplicate"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",children:"Partner"}),e.jsx("div",{className:"font-semibold",children:p(l.partner_id)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted",children:"Source"}),e.jsx("div",{className:"font-semibold",children:l.source_platform})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("div",{className:"text-muted",children:"Date"}),e.jsx("div",{className:"font-mono text-xs",children:new Date(l.created_at).toLocaleDateString()})]})]}),e.jsx("div",{className:"pt-2 border-t border-white/10",children:e.jsx("button",{onClick:async()=>{await j.updateLeadAdmin(l.id,{is_duplicate:!l.is_duplicate}),x()},className:"w-full px-3 py-2 bg-white/5 rounded-lg hover:bg-white/10 text-xs font-bold transition-colors",children:l.is_duplicate?"Un-Flag Duplicate":"Flag as Duplicate"})})]},l.id))})]}),Fe=({partners:o,getPartnerName:p,refreshData:x})=>{const[l,N]=g.useState(!1),[n,v]=g.useState({partnerId:"",clientName:"",dealValue:"",commissionPerc:20,serviceType:"Standard Service",date:new Date().toISOString().split("T")[0]}),m=(o==null?void 0:o.flatMap(s=>(s.earningsHistory||[]).map(c=>({...c,partnerName:p(s.id)||"Unknown Partner",partnerId:s.id}))).sort((s,c)=>new Date(c.date).getTime()-new Date(s.date).getTime()))||[],k=m.reduce((s,c)=>s+(Number(c.dealValue)||0),0),h=m.filter(s=>s.status==="pending").reduce((s,c)=>s+(Number(c.amount)||0),0),w=m.filter(s=>s.status==="approved").reduce((s,c)=>s+(Number(c.amount)||0),0),t=m.filter(s=>s.status==="paid").reduce((s,c)=>s+(Number(c.amount)||0),0),b=async s=>{if(s.preventDefault(),!n.partnerId){alert("Select a partner");return}const c=await j.addEarning({partnerId:n.partnerId,clientName:n.clientName,serviceType:n.serviceType,dealValue:parseFloat(n.dealValue),commissionPerc:Number(n.commissionPerc),date:n.date});if(!c.success){alert("Failed to log earning: "+c.error);return}alert("Earning Created!"),N(!1),v({partnerId:"",clientName:"",dealValue:"",commissionPerc:20,serviceType:"Standard Service",date:new Date().toISOString().split("T")[0]}),x()},r=async(s,c,A,d)=>{if(!confirm(`Change status to ${c.toUpperCase()}? This handles financial logic.`))return;const y=await j.updateEarningStatus(s,c,A,d);if(!y.success){alert("Update failed: "+y.error);return}y.warning&&alert("Warning: "+y.warning),x()};return e.jsxs("div",{className:"space-y-8 animate-fade-in text-white/90",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-surface border border-white/10 p-4 rounded-xl",children:[e.jsx("div",{className:"text-xs text-muted uppercase",children:"Total Revenue (Booked)"}),e.jsxs("div",{className:"text-2xl font-bold font-mono",children:["â‚¹",k.toLocaleString()]})]}),e.jsxs("div",{className:"bg-surface border border-white/10 p-4 rounded-xl",children:[e.jsx("div",{className:"text-xs text-yellow-500 uppercase",children:"Pending Liability"}),e.jsxs("div",{className:"text-2xl font-bold font-mono text-yellow-400",children:["â‚¹",h.toLocaleString()]})]}),e.jsxs("div",{className:"bg-surface border border-white/10 p-4 rounded-xl",children:[e.jsx("div",{className:"text-xs text-blue-500 uppercase",children:"Approved (Unpaid)"}),e.jsxs("div",{className:"text-2xl font-bold font-mono text-blue-400",children:["â‚¹",w.toLocaleString()]})]}),e.jsxs("div",{className:"bg-surface border border-white/10 p-4 rounded-xl",children:[e.jsx("div",{className:"text-xs text-green-500 uppercase",children:"Total Paid Out"}),e.jsxs("div",{className:"text-2xl font-bold font-mono text-green-400",children:["â‚¹",t.toLocaleString()]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-3xl font-display font-bold",children:"Earnings Manager"}),e.jsx("button",{onClick:()=>N(!l),className:"bg-white text-black px-4 py-2 rounded-lg font-bold hover:bg-white/90 transition-colors",children:l?"Cancel":"+ New Earning Entry"})]}),e.jsx(Q,{children:l&&e.jsx(F.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"overflow-hidden",children:e.jsxs("form",{onSubmit:b,className:"bg-surface border border-white/10 p-6 rounded-xl grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("label",{className:"text-xs text-muted uppercase",children:"Growth Partner"}),e.jsxs("select",{className:"w-full bg-black/40 border border-white/10 rounded-lg p-3 mt-1",value:n.partnerId,onChange:s=>v({...n,partnerId:s.target.value}),required:!0,children:[e.jsx("option",{value:"",children:"Select Partner..."}),o.map(s=>e.jsxs("option",{value:s.id,children:[p(s.id)," (",s.stage,")"]},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted uppercase",children:"Client / Deal Name"}),e.jsx("input",{required:!0,className:"w-full bg-black/40 border border-white/10 rounded-lg p-3 mt-1",value:n.clientName,onChange:s=>v({...n,clientName:s.target.value}),placeholder:"e.g. Acme Corp"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted uppercase",children:"Deal Value (â‚¹)"}),e.jsx("input",{required:!0,type:"number",className:"w-full bg-black/40 border border-white/10 rounded-lg p-3 mt-1",value:n.dealValue,onChange:s=>v({...n,dealValue:s.target.value}),placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted uppercase",children:"Commission %"}),e.jsx("input",{required:!0,type:"number",className:"w-full bg-black/40 border border-white/10 rounded-lg p-3 mt-1",value:n.commissionPerc,onChange:s=>v({...n,commissionPerc:parseInt(s.target.value)}),placeholder:"20"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted uppercase",children:"Date Closed"}),e.jsx("input",{required:!0,type:"date",className:"w-full bg-black/40 border border-white/10 rounded-lg p-3 mt-1",value:n.date,onChange:s=>v({...n,date:s.target.value})})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{type:"submit",className:"w-full bg-green-500 text-black font-bold py-3 rounded-lg hover:bg-green-400 transition-colors",children:"Log Commission"})})]})})}),e.jsx("div",{className:"bg-surface border border-white/10 rounded-xl overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-white/5 text-muted uppercase text-xs",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:"Date"}),e.jsx("th",{className:"p-4",children:"Partner"}),e.jsx("th",{className:"p-4",children:"Client / Deal"}),e.jsx("th",{className:"p-4",children:"Commission"}),e.jsx("th",{className:"p-4",children:"Status"}),e.jsx("th",{className:"p-4 text-right w-[160px]",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-white/5",children:m.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"p-8 text-center text-muted",children:"No earnings records found."})}):m.map(s=>e.jsxs("tr",{className:"hover:bg-white/5 transition-colors group",children:[e.jsx("td",{className:"p-4 text-muted text-xs",children:new Date(s.date).toLocaleDateString()}),e.jsx("td",{className:"p-4 font-bold",children:s.partnerName}),e.jsxs("td",{className:"p-4",children:[e.jsx("div",{className:"font-bold",children:s.clientName}),e.jsxs("div",{className:"text-xs text-muted",children:["Val: â‚¹",Number(s.dealValue).toLocaleString()]})]}),e.jsxs("td",{className:"p-4 font-mono font-bold text-green-400",children:["â‚¹",Number(s.amount).toLocaleString()]}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-[10px] uppercase font-bold border ${s.status==="paid"?"bg-green-500/10 border-green-500/20 text-green-500":s.status==="approved"?"bg-blue-500/10 border-blue-500/20 text-blue-500":"bg-yellow-500/10 border-yellow-500/20 text-yellow-500"}`,children:s.status})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-3",children:[s.status==="pending"&&e.jsx("button",{onClick:()=>r(s.id,"approved",s.partnerId,Number(s.amount)),className:"text-xs font-bold bg-blue-500/20 text-blue-400 px-3 py-1.5 rounded hover:bg-blue-500 hover:text-white transition-colors",children:"Approve"}),s.status==="approved"&&e.jsx("button",{onClick:()=>r(s.id,"paid",s.partnerId,Number(s.amount)),className:"text-xs font-bold bg-green-500/20 text-green-400 px-3 py-1.5 rounded hover:bg-green-500 hover:text-white transition-colors",children:"Mark Paid"}),e.jsx("button",{className:"p-1.5 text-muted hover:text-red-500 hover:bg-white/5 rounded transition-colors",title:"Delete Log",children:e.jsx(T,{size:16})})]})})]},s.id))})]})})]})},Ee=({adminSettings:o,setAdminSettings:p,handleSaveSettings:x})=>{var l;return e.jsxs("div",{className:"space-y-6 animate-fade-in max-w-2xl",children:[e.jsx("h2",{className:"text-3xl font-display font-bold",children:"System Configuration"}),e.jsxs("form",{onSubmit:x,className:"bg-surface border border-white/10 p-6 rounded-xl space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted uppercase block mb-1",children:"Commission Percentage (%)"}),e.jsx("input",{type:"number",value:o.commission_percentage||20,onChange:N=>p({...o,commission_percentage:parseInt(N.target.value)}),className:"bg-background border border-white/10 p-3 rounded-lg w-full text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted uppercase block mb-1",children:"Accepted Platforms (Comma sep)"}),e.jsx("input",{type:"text",value:((l=o.accepted_platforms)==null?void 0:l.join(", "))||"",onChange:N=>p({...o,accepted_platforms:N.target.value.split(",").map(n=>n.trim())}),className:"bg-background border border-white/10 p-3 rounded-lg w-full text-white"})]}),e.jsx("button",{className:"bg-accent text-background px-6 py-2 rounded-lg font-bold w-full hover:bg-white mt-4",children:"Save Configuration"})]})]})},Ie=({applications:o,partners:p,handleReviewApp:x,handleDeleteApp:l,setSelectedApplicant:N})=>{const[n,v]=g.useState("pending"),m=o.filter(t=>t.status==="pending"),k=o.filter(t=>t.status==="rejected"),h=o.filter(t=>t.status==="approved"&&!p.find(b=>b.applicationId===t.id)),w=()=>{switch(n){case"pending":return m;case"activation":return h;case"rejected":return k;default:return o}};return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-display font-bold",children:"Applications"}),e.jsx("div",{className:"flex bg-white/5 rounded-lg p-1 gap-1 overflow-x-auto",children:["pending","activation","rejected","all"].map(t=>e.jsxs("button",{onClick:()=>v(t),className:`px-3 md:px-4 py-2 rounded-md text-xs md:text-sm font-bold capitalize transition-all whitespace-nowrap ${n===t?"bg-accent text-black":"text-muted hover:text-white"}`,children:[t==="activation"?"Onboarding":t,t==="pending"&&m.length>0&&e.jsx("span",{className:"ml-2 bg-red-500 text-white text-[10px] px-1.5 py-0.5 rounded-full",children:m.length}),t==="activation"&&h.length>0&&e.jsx("span",{className:"ml-2 bg-yellow-500 text-black text-[10px] px-1.5 py-0.5 rounded-full",children:h.length})]},t))})]}),e.jsx("div",{className:"hidden md:block bg-surface border border-white/10 rounded-xl overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-white/5 text-muted uppercase text-xs",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:"Applicant"}),e.jsx("th",{className:"p-4",children:"Details"}),e.jsx("th",{className:"p-4",children:"Date"}),e.jsx("th",{className:"p-4",children:"Status"}),e.jsx("th",{className:"p-4 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-white/5",children:w().length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"p-8 text-center text-muted",children:"No applications found in this category."})}):w().map(t=>e.jsxs("tr",{className:"hover:bg-white/5",children:[e.jsxs("td",{className:"p-4",children:[e.jsx("div",{className:"font-bold",children:t.fullName}),e.jsx("div",{className:"text-xs text-muted",children:t.email})]}),e.jsxs("td",{className:"p-4 text-xs text-muted",children:[t.city," â€¢ ",t.experience?"Exp":"No Exp"]}),e.jsx("td",{className:"p-4 text-xs font-mono text-muted",children:new Date(t.appliedAt).toLocaleDateString()}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs uppercase font-bold ${t.status==="approved"?"bg-green-500/20 text-green-500":t.status==="rejected"?"bg-red-500/20 text-red-500":"bg-yellow-500/20 text-yellow-500"}`,children:t.status})}),e.jsxs("td",{className:"p-4 text-right flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>N(t),className:"p-2 bg-white/5 rounded hover:bg-white/10 text-xs font-bold mr-2",children:"View Profile"}),t.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>x(t.id,"approved"),className:"text-green-400 p-1 hover:bg-green-500/20 rounded",children:e.jsx(K,{size:16})}),e.jsx("button",{onClick:()=>x(t.id,"rejected"),className:"text-red-400 p-1 hover:bg-red-500/20 rounded",children:e.jsx(E,{size:16})})]}),t.status==="approved"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{const b="Application Approved - Frame n Flow Media GPP",r=`Hello ${t.fullName.split(" ")[0]},

We are pleased to accept you into the Growth Partner Program.

Please activate your account by creating your credentials here:
${window.location.origin}/#/growth-partner/signup

(This link allows you to set your password)

Welcome aboard,
Frame n Flow Media Team`;window.location.href=`mailto:${t.email}?subject=${encodeURIComponent(b)}&body=${encodeURIComponent(r)}`},className:"text-blue-400 p-1 hover:bg-blue-500/20 rounded",title:"Send Acceptance Email",children:e.jsx(q,{size:16})}),e.jsx("button",{onClick:()=>x(t.id,"pending"),className:"text-yellow-400 p-1 hover:bg-yellow-500/20 rounded",title:"Unapprove (Revert to Pending)",children:e.jsx(V,{size:16})}),e.jsx("button",{onClick:()=>l(t.id),className:"text-red-400 p-1 hover:bg-red-500/20 rounded",title:"Delete Applicant",children:e.jsx(T,{size:16})})]}),t.status==="rejected"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>x(t.id,"approved"),className:"text-green-400 p-1 hover:bg-green-500/20 rounded",title:"Re-Approve",children:e.jsx(V,{size:16})}),e.jsx("button",{onClick:()=>l(t.id),className:"text-red-400 p-1 hover:bg-red-500/20 rounded",title:"Delete Applicant",children:e.jsx(T,{size:16})})]})]})]},t.id))})]})}),e.jsx("div",{className:"md:hidden space-y-3",children:w().length===0?e.jsx("div",{className:"bg-surface border border-white/10 rounded-xl p-8 text-center text-muted",children:"No applications found in this category."}):w().map(t=>e.jsxs("div",{className:"bg-surface border border-white/10 rounded-xl p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-base",children:t.fullName}),e.jsx("div",{className:"text-xs text-muted mt-1",children:t.email}),e.jsxs("div",{className:"text-xs text-muted mt-1",children:[t.city," â€¢ ",t.experience?"Experienced":"No Experience"]})]}),e.jsx("span",{className:`px-2 py-1 rounded text-xs uppercase font-bold whitespace-nowrap ${t.status==="approved"?"bg-green-500/20 text-green-500":t.status==="rejected"?"bg-red-500/20 text-red-500":"bg-yellow-500/20 text-yellow-500"}`,children:t.status})]}),e.jsxs("div",{className:"text-xs text-muted font-mono",children:["Applied: ",new Date(t.appliedAt).toLocaleDateString()]}),e.jsxs("div",{className:"flex flex-wrap gap-2 pt-2 border-t border-white/10",children:[e.jsx("button",{onClick:()=>N(t),className:"flex-1 min-w-[120px] px-3 py-2 bg-white/5 rounded-lg hover:bg-white/10 text-xs font-bold transition-colors",children:"View Profile"}),t.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>x(t.id,"approved"),className:"px-3 py-2 bg-green-500/20 text-green-400 rounded-lg hover:bg-green-500/30 text-xs font-bold transition-colors flex items-center gap-1",children:[e.jsx(K,{size:14})," Approve"]}),e.jsxs("button",{onClick:()=>x(t.id,"rejected"),className:"px-3 py-2 bg-red-500/20 text-red-400 rounded-lg hover:bg-red-500/30 text-xs font-bold transition-colors flex items-center gap-1",children:[e.jsx(E,{size:14})," Reject"]})]}),t.status==="approved"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>{const b="Application Approved - Frame n Flow Media GPP",r=`Hello ${t.fullName.split(" ")[0]},

We are pleased to accept you into the Growth Partner Program.

Please activate your account by creating your credentials here:
${window.location.origin}/#/growth-partner/signup

(This link allows you to set your password)

Welcome aboard,
Frame n Flow Media Team`;window.location.href=`mailto:${t.email}?subject=${encodeURIComponent(b)}&body=${encodeURIComponent(r)}`},className:"px-3 py-2 bg-blue-500/20 text-blue-400 rounded-lg hover:bg-blue-500/30 text-xs font-bold transition-colors flex items-center gap-1",children:[e.jsx(q,{size:14})," Email"]}),e.jsxs("button",{onClick:()=>x(t.id,"pending"),className:"px-3 py-2 bg-yellow-500/20 text-yellow-400 rounded-lg hover:bg-yellow-500/30 text-xs font-bold transition-colors flex items-center gap-1",children:[e.jsx(V,{size:14})," Revert"]}),e.jsxs("button",{onClick:()=>l(t.id),className:"px-3 py-2 bg-red-500/20 text-red-400 rounded-lg hover:bg-red-500/30 text-xs font-bold transition-colors flex items-center gap-1",children:[e.jsx(T,{size:14})," Delete"]})]}),t.status==="rejected"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>x(t.id,"approved"),className:"px-3 py-2 bg-green-500/20 text-green-400 rounded-lg hover:bg-green-500/30 text-xs font-bold transition-colors flex items-center gap-1",children:[e.jsx(V,{size:14})," Re-Approve"]}),e.jsxs("button",{onClick:()=>l(t.id),className:"px-3 py-2 bg-red-500/20 text-red-400 rounded-lg hover:bg-red-500/30 text-xs font-bold transition-colors flex items-center gap-1",children:[e.jsx(T,{size:14})," Delete"]})]})]})]},t.id))}),e.jsxs("div",{className:"bg-surface border border-white/10 p-4 md:p-6 rounded-xl mt-8",children:[e.jsxs("h3",{className:"font-bold flex items-center gap-2 mb-4 text-sm md:text-base",children:[e.jsx(q,{size:18})," Default Acceptance Template"]}),e.jsx("div",{className:"bg-black/30 p-3 md:p-4 rounded-lg font-mono text-[10px] md:text-xs text-muted whitespace-pre-wrap select-all border border-white/5 overflow-x-auto",children:`Subject: Application Approved - Frame n Flow Media GPP

Hello [Name],

We are pleased to accept you into the Growth Partner Program.

Please activate your account by creating your credentials here:
${window.location.origin}/#/growth-partner/signup

(This link allows you to set your password)

Welcome aboard,
Frame n Flow Media Team`})]})]})},Xe=()=>{var re;const o=ve(),[p,x]=g.useState(null),[l,N]=g.useState([]),[n,v]=g.useState([]),[m,k]=g.useState([]),[h,w]=g.useState({}),[t,b]=g.useState("overview"),[r,s]=g.useState(""),[c,A]=g.useState(!0),[d,y]=g.useState(null),[f,W]=g.useState(null),[Y,Z]=g.useState({title:"",message:""}),[pe,be]=g.useState([]),[Me,Be]=g.useState({leadName:"",amount:"",date:new Date().toISOString().split("T")[0]}),[J,ee]=g.useState(!1),[I,te]=g.useState("overview");g.useEffect(()=>{(async()=>{const u=await j.getCurrentUser();if(!u||u.role!=="admin"){o("/growth-partner/login");return}x(u),D()})()},[o]);const D=async()=>{A(!0);const a=await j.getApplications(),u=await j.getAllPartners(),C=await j.getAllLeads(),S=await j.getAdminSettings(),M=await j.getBroadcasts();N([...a].sort((_,L)=>_.status==="pending"?-1:1)),v(u),k(C),w(S),be(M),A(!1)},se=async()=>{await j.logout(),o("/growth-partner/login")},ae=async(a,u)=>{confirm(`Are you sure you want to change status to ${u}?`)&&(await j.reviewApplication(a,u),D())},ge=async a=>{confirm("Are you sure you want to PERMANENTLY DELETE this applicant? This cannot be undone.")&&(await j.deleteApplication(a),D())},je=async a=>{a.preventDefault();const{error:u}=await j.sendBroadcast(Y.title,Y.message);u?alert("Error sending notification. Ensure DB Schema is updated."):(alert("Notification sent to all partners!"),Z({title:"",message:""}),D())},Ne=async a=>{confirm("Delete this broadcast? Partners will no longer see it.")&&(await j.deleteBroadcast(a),D())},fe=async a=>{a.preventDefault(),await j.updateAdminSettings(h),alert("Configuration saved.")},le=async(a,u)=>{if(!confirm(`âš ï¸ WARNING: You are about to PERMANENTLY DELETE ${u} and ALL their data.

This will delete:
â€¢ Partner profile and account
â€¢ All outreach logs
â€¢ All earnings records
â€¢ All leads
â€¢ Application record

This action CANNOT be undone!

Do you want to download a backup of their activity first?`))return;if(confirm("Download activity backup (JSON) before deleting?"))try{const L=await j.getUserActivityData(a);if(!L){alert("Failed to fetch user activity data. Deletion cancelled.");return}const B=JSON.stringify(L,null,2),O=new Blob([B],{type:"application/json"}),U=URL.createObjectURL(O),z=document.createElement("a");z.href=U,z.download=`${u.replace(/\s+/g,"_")}_Activity_Backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(z),z.click(),document.body.removeChild(z),URL.revokeObjectURL(U),alert("Backup downloaded successfully!")}catch(L){if(console.error("Error downloading backup:",L),!confirm("Failed to download backup. Continue with deletion anyway?"))return}if(!confirm(`FINAL CONFIRMATION:

Are you absolutely sure you want to delete ${u}?

This will permanently remove all their data.`))return;const _=await j.deletePartner(a);_.success?(alert(`${u} has been permanently deleted.`),y(null),D()):alert(`Failed to delete partner: ${_.error}`)},X=()=>{y(null),te("overview")},$=a=>{const u=n.find(S=>S.id===a);if(!u)return"Unknown";const C=l.find(S=>S.id===u.applicationId);return(C==null?void 0:C.fullName)||"Unknown"};return c?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-950 via-slate-900 to-purple-950 flex flex-col items-center justify-center text-white space-y-4",children:[e.jsx("div",{className:"text-4xl font-display font-bold text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-purple-400 animate-pulse",children:"Frame n Flow Media"}),e.jsxs("div",{className:"flex items-center gap-2 text-indigo-300 text-sm font-mono tracking-widest uppercase animate-pulse",children:[e.jsx(xe,{size:16,className:"animate-spin"}),"Admin Portal Loading..."]})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-indigo-950 to-slate-900 font-sans text-white",children:[e.jsx("nav",{className:"sticky top-0 z-50 bg-slate-950/90 backdrop-blur-xl border-b border-indigo-500/20 shadow-xl shadow-indigo-500/5",children:e.jsxs("div",{className:"max-w-[1920px] mx-auto px-6 py-3.5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-11 h-11 rounded-xl bg-gradient-to-br from-indigo-500 via-purple-600 to-indigo-600 flex items-center justify-center shadow-lg shadow-indigo-500/30",children:e.jsx(xe,{size:22,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold font-display bg-gradient-to-r from-white to-indigo-200 bg-clip-text text-transparent",children:"Frame n Flow Media"}),e.jsxs("div",{className:"text-[10px] text-indigo-400 font-mono uppercase tracking-widest flex items-center gap-1.5",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-indigo-400 rounded-full animate-pulse"}),"Admin Portal"]})]})]}),e.jsx("div",{className:"h-10 w-px bg-indigo-500/20 hidden md:block"}),e.jsxs("div",{className:"hidden md:flex items-center gap-2 px-3 py-1.5 bg-indigo-500/10 border border-indigo-500/30 rounded-lg backdrop-blur-sm",children:[e.jsx("div",{className:"w-2 h-2 bg-emerald-400 rounded-full animate-pulse shadow-lg shadow-emerald-400/50"}),e.jsx("span",{className:"text-xs font-semibold text-indigo-200",children:p==null?void 0:p.name})]})]}),e.jsxs("div",{className:"hidden lg:flex items-center gap-1.5",children:[e.jsxs("button",{onClick:()=>b("overview"),className:`relative px-4 py-2.5 rounded-lg font-semibold text-sm transition-all flex items-center gap-2 ${t==="overview"?"bg-indigo-500/20 text-indigo-200 border border-indigo-500/40 shadow-lg shadow-indigo-500/10":"text-slate-400 hover:text-white hover:bg-white/5 border border-transparent"}`,children:[e.jsx(ce,{size:16}),"Command Center"]}),e.jsxs("button",{onClick:()=>b("partners"),className:`relative px-4 py-2.5 rounded-lg font-semibold text-sm transition-all flex items-center gap-2 ${t==="partners"?"bg-indigo-500/20 text-indigo-200 border border-indigo-500/40 shadow-lg shadow-indigo-500/10":"text-slate-400 hover:text-white hover:bg-white/5 border border-transparent"}`,children:[e.jsx(G,{size:16}),"Partners"]}),e.jsxs("button",{onClick:()=>b("apps"),className:`relative px-4 py-2.5 rounded-lg font-semibold text-sm transition-all flex items-center gap-2 ${t==="apps"?"bg-indigo-500/20 text-indigo-200 border border-indigo-500/40 shadow-lg shadow-indigo-500/10":"text-slate-400 hover:text-white hover:bg-white/5 border border-transparent"}`,children:[e.jsx(ie,{size:16}),"Applications"]}),e.jsxs("button",{onClick:()=>b("leads"),className:`relative px-4 py-2.5 rounded-lg font-semibold text-sm transition-all flex items-center gap-2 ${t==="leads"?"bg-indigo-500/20 text-indigo-200 border border-indigo-500/40 shadow-lg shadow-indigo-500/10":"text-slate-400 hover:text-white hover:bg-white/5 border border-transparent"}`,children:[e.jsx(ne,{size:16}),"Leads"]}),e.jsxs("button",{onClick:()=>b("payouts"),className:`relative px-4 py-2.5 rounded-lg font-semibold text-sm transition-all flex items-center gap-2 ${t==="payouts"?"bg-indigo-500/20 text-indigo-200 border border-indigo-500/40 shadow-lg shadow-indigo-500/10":"text-slate-400 hover:text-white hover:bg-white/5 border border-transparent"}`,children:[e.jsx(H,{size:16}),"Commissions"]}),e.jsxs("button",{onClick:()=>b("settings"),className:`relative px-4 py-2.5 rounded-lg font-semibold text-sm transition-all flex items-center gap-2 ${t==="settings"?"bg-indigo-500/20 text-indigo-200 border border-indigo-500/40 shadow-lg shadow-indigo-500/10":"text-slate-400 hover:text-white hover:bg-white/5 border border-transparent"}`,children:[e.jsx(de,{size:16}),"Settings"]})]}),e.jsxs("div",{className:"hidden lg:flex items-center gap-3",children:[e.jsx("button",{className:"w-10 h-10 rounded-lg bg-indigo-500/10 hover:bg-indigo-500/20 flex items-center justify-center text-slate-400 hover:text-indigo-300 transition-all border border-indigo-500/20",children:e.jsx(ue,{size:18})}),e.jsxs("button",{onClick:se,className:"px-4 py-2.5 rounded-lg bg-red-500/10 hover:bg-red-500/20 text-red-400 hover:text-red-300 font-semibold text-sm flex items-center gap-2 transition-all border border-red-500/30",children:[e.jsx(oe,{size:16}),"Logout"]})]}),e.jsx("button",{onClick:()=>ee(!J),className:"lg:hidden p-2 text-indigo-200 hover:bg-white/5 rounded-lg transition-colors",children:J?e.jsx(we,{size:24}):e.jsx(ye,{size:24})})]}),e.jsx(Q,{children:J&&e.jsx(F.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"lg:hidden absolute top-full left-0 w-full bg-slate-950/95 backdrop-blur-xl border-b border-indigo-500/20 shadow-2xl p-4 overflow-hidden z-50",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-3 bg-indigo-500/10 border border-indigo-500/20 rounded-lg mb-4",children:[e.jsx("div",{className:"w-2 h-2 bg-emerald-400 rounded-full shadow-lg shadow-emerald-400/50"}),e.jsxs("span",{className:"text-sm font-semibold text-indigo-200",children:[p==null?void 0:p.name," (Admin)"]})]}),[{id:"overview",label:"Command Center",icon:ce},{id:"partners",label:"Partners",icon:G},{id:"apps",label:"Applications",icon:ie},{id:"leads",label:"Leads",icon:ne},{id:"payouts",label:"Commissions",icon:H},{id:"settings",label:"Settings",icon:de}].map(a=>e.jsxs("button",{onClick:()=>{b(a.id),ee(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-semibold transition-all ${t===a.id?"bg-indigo-500/20 text-indigo-200 border border-indigo-500/30":"text-slate-400 hover:bg-white/5 hover:text-white border border-transparent"}`,children:[e.jsx(a.icon,{size:18}),a.label]},a.id)),e.jsx("div",{className:"h-px bg-white/10 my-2"}),e.jsxs("button",{onClick:se,className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-semibold text-red-400 hover:bg-red-500/10 hover:text-red-300 transition-all",children:[e.jsx(oe,{size:18}),"Logout"]})]})})})]})}),e.jsxs("main",{className:"max-w-[1920px] mx-auto px-6 py-8",children:[t==="overview"&&e.jsx(_e,{partners:n,allLeads:m,applications:l,broadcastForm:Y,setBroadcastForm:Z,handlePostBroadcast:je,handleReviewApp:ae,broadcasts:pe,handleDeleteBroadcast:Ne}),t==="partners"&&e.jsx(Te,{partners:n,searchQuery:r,setSearchQuery:s,applications:l,allLeads:m,getPartnerName:$,setSelectedPartner:y,handleDeletePartner:le}),t==="apps"&&e.jsx(Ie,{applications:l,partners:n,handleReviewApp:ae,handleDeleteApp:ge,setSelectedApplicant:W}),t==="leads"&&e.jsx($e,{allLeads:m,getPartnerName:$,refreshData:D}),t==="payouts"&&e.jsx(Fe,{partners:n,getPartnerName:$,refreshData:D}),t==="settings"&&e.jsx(Ee,{adminSettings:h,setAdminSettings:w,handleSaveSettings:fe})]}),e.jsxs(Q,{children:[d&&(()=>{var C,S,M,_,L,B,O,U,z;const a=l.find(i=>i.id===d.applicationId),u=m.filter(i=>i.partner_id===d.id);return e.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/90 flex items-center justify-center p-2 md:p-4 backdrop-blur-sm overflow-y-auto",onClick:X,children:e.jsxs(F.div,{initial:{scale:.95,y:20},animate:{scale:1,y:0},exit:{scale:.95,y:20},className:"bg-gradient-to-br from-surface to-background border border-white/10 w-full max-w-6xl rounded-2xl overflow-hidden my-4",onClick:i=>i.stopPropagation(),children:[e.jsxs("div",{className:"relative bg-gradient-to-r from-accent/20 via-purple-500/20 to-blue-500/20 p-6 md:p-8 border-b border-white/10",children:[e.jsx("button",{onClick:X,className:"absolute top-4 right-4 text-white/60 hover:text-white transition-colors",children:e.jsx(E,{size:28})}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-start md:items-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-accent to-purple-500 flex items-center justify-center text-3xl font-bold",children:$(d.id).charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold font-display mb-2",children:$(d.id)}),e.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[e.jsxs("span",{className:"px-3 py-1 bg-accent/20 text-accent rounded-full text-sm font-bold",children:[d.stage," Partner"]}),e.jsxs("span",{className:"text-sm text-white/60",children:["ID: ",d.id.slice(0,8)]}),(a==null?void 0:a.email)&&e.jsxs("span",{className:"text-sm text-white/80",children:["ðŸ“§ ",a.email]})]})]})]})]}),e.jsx("div",{className:"border-b border-white/10 bg-black/20",children:e.jsx("div",{className:"flex overflow-x-auto",children:["overview","activity","leads","earnings"].map(i=>e.jsx("button",{onClick:()=>te(i),className:`px-6 py-4 font-bold text-sm uppercase tracking-wider transition-all whitespace-nowrap ${I===i?"text-accent border-b-2 border-accent bg-accent/5":"text-muted hover:text-white hover:bg-white/5"}`,children:i},i))})}),e.jsxs("div",{className:"p-4 md:p-8 max-h-[60vh] overflow-y-auto",children:[I==="overview"&&e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-500/10 to-green-500/5 border border-green-500/20 p-4 rounded-xl",children:[e.jsx("div",{className:"text-xs text-green-400 uppercase mb-1",children:"Total Earnings"}),e.jsxs("div",{className:"text-2xl font-bold font-mono text-green-400",children:["â‚¹",(((C=d.earnings)==null?void 0:C.total)||0).toLocaleString()]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-500/10 to-blue-500/5 border border-blue-500/20 p-4 rounded-xl",children:[e.jsx("div",{className:"text-xs text-blue-400 uppercase mb-1",children:"Outreach"}),e.jsx("div",{className:"text-2xl font-bold font-mono",children:d.outreachLogs.reduce((i,P)=>i+P.count,0)})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500/10 to-purple-500/5 border border-purple-500/20 p-4 rounded-xl",children:[e.jsx("div",{className:"text-xs text-purple-400 uppercase mb-1",children:"Leads"}),e.jsx("div",{className:"text-2xl font-bold font-mono",children:u.length})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-500/10 to-yellow-500/5 border border-yellow-500/20 p-4 rounded-xl",children:[e.jsx("div",{className:"text-xs text-yellow-400 uppercase mb-1",children:"Pending"}),e.jsxs("div",{className:"text-2xl font-bold font-mono text-yellow-400",children:["â‚¹",(((S=d.earnings)==null?void 0:S.pending)||0).toLocaleString()]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white/5 border border-white/10 p-6 rounded-xl space-y-4",children:[e.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2",children:[e.jsx(G,{size:20,className:"text-accent"})," Account Information"]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-white/5",children:[e.jsx("span",{className:"text-muted",children:"Email"}),e.jsx("span",{className:"font-mono",children:(a==null?void 0:a.email)||"N/A"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-white/5",children:[e.jsx("span",{className:"text-muted",children:"Phone"}),e.jsx("span",{className:"font-mono",children:(a==null?void 0:a.phone)||"N/A"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-white/5",children:[e.jsx("span",{className:"text-muted",children:"City"}),e.jsx("span",{children:(a==null?void 0:a.city)||"N/A"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-muted",children:"Joined"}),e.jsx("span",{children:a!=null&&a.appliedAt?new Date(a.appliedAt).toLocaleDateString():"N/A"})]})]})]}),e.jsxs("div",{className:"bg-white/5 border border-white/10 p-6 rounded-xl space-y-4",children:[e.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2",children:[e.jsx(H,{size:20,className:"text-green-400"})," Banking Details"]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-white/5",children:[e.jsx("span",{className:"text-muted",children:"UPI ID"}),e.jsx("span",{className:"font-mono",children:((M=d.bankDetails)==null?void 0:M.upiId)||"Not Set"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-white/5",children:[e.jsx("span",{className:"text-muted",children:"Bank Name"}),e.jsx("span",{children:((_=d.bankDetails)==null?void 0:_.bankName)||"Not Set"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-white/5",children:[e.jsx("span",{className:"text-muted",children:"Account Number"}),e.jsx("span",{className:"font-mono",children:(L=d.bankDetails)!=null&&L.accountNumber?"****"+d.bankDetails.accountNumber.slice(-4):"Not Set"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-muted",children:"IFSC"}),e.jsx("span",{className:"font-mono",children:((B=d.bankDetails)==null?void 0:B.ifsc)||"Not Set"})]})]})]})]}),a&&e.jsxs("div",{className:"bg-white/5 border border-white/10 p-6 rounded-xl",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"Application Details"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted block mb-1",children:"Background"}),e.jsx("p",{className:"text-white/90",children:a.background||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted block mb-1",children:"Reason for Joining"}),e.jsx("p",{className:"text-white/90",children:a.reason||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted block mb-1",children:"Platforms"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:(O=a.platforms)==null?void 0:O.map((i,P)=>e.jsx("span",{className:"px-2 py-1 bg-accent/20 text-accent rounded text-xs",children:i},P))})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted block mb-1",children:"Experience"}),e.jsx("p",{className:"text-white/90",children:a.experience?"Yes":"No"})]})]})]})]}),I==="activity"&&e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsx("h3",{className:"font-bold text-xl",children:"Outreach Activity"}),e.jsx("div",{className:"space-y-3",children:d.outreachLogs.length>0?d.outreachLogs.map((i,P)=>e.jsx("div",{className:"bg-white/5 border border-white/10 p-4 rounded-xl hover:bg-white/10 transition-colors",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-sm font-bold",children:new Date(i.date).toLocaleDateString()}),e.jsx("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-400 rounded text-xs",children:i.medium})]}),i.notes&&e.jsxs("p",{className:"text-sm text-muted italic",children:['"',i.notes,'"']})]}),e.jsxs("div",{className:"flex gap-6 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:i.count}),e.jsx("div",{className:"text-xs text-muted",children:"Sent"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-400",children:i.replies}),e.jsx("div",{className:"text-xs text-muted",children:"Replies"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-400",children:i.interested}),e.jsx("div",{className:"text-xs text-muted",children:"Interested"})]})]})]})},P)):e.jsx("div",{className:"text-center text-muted py-12",children:"No activity logs yet"})})]}),I==="leads"&&e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("h3",{className:"font-bold text-xl",children:["Leads (",u.length,")"]}),e.jsx("div",{className:"space-y-3",children:u.length>0?u.map((i,P)=>e.jsx("div",{className:"bg-white/5 border border-white/10 p-4 rounded-xl hover:bg-white/10 transition-colors",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-lg mb-1",children:i.business_name}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-sm text-muted mb-2",children:[i.contact_person&&e.jsxs("span",{children:["ðŸ‘¤ ",i.contact_person]}),i.source_platform&&e.jsxs("span",{children:["ðŸ“± ",i.source_platform]})]}),i.notes&&e.jsxs("p",{className:"text-sm text-white/70 italic",children:['"',i.notes,'"']})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${i.status==="Converted"?"bg-green-500/20 text-green-400":i.status==="Lost"?"bg-red-500/20 text-red-400":"bg-blue-500/20 text-blue-400"}`,children:i.status}),e.jsx("span",{className:"text-xs text-muted",children:new Date(i.created_at).toLocaleDateString()})]})]})},P)):e.jsx("div",{className:"text-center text-muted py-12",children:"No leads added yet"})})]}),I==="earnings"&&e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"font-bold text-xl",children:"Earnings History"}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-muted",children:"Total Earned"}),e.jsxs("div",{className:"text-2xl font-bold text-green-400",children:["â‚¹",(((U=d.earnings)==null?void 0:U.total)||0).toLocaleString()]})]})]}),e.jsx("div",{className:"space-y-3",children:((z=d.earningsHistory)==null?void 0:z.length)>0?d.earningsHistory.map((i,P)=>e.jsx("div",{className:"bg-white/5 border border-white/10 p-4 rounded-xl hover:bg-white/10 transition-colors",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-lg mb-1",children:i.clientName}),e.jsxs("div",{className:"flex flex-wrap gap-3 text-sm text-muted",children:[e.jsxs("span",{children:["ðŸ¢ ",i.serviceType]}),e.jsxs("span",{children:["ðŸ’° Deal: â‚¹",Number(i.dealValue).toLocaleString()]}),e.jsxs("span",{children:["ðŸ“Š ",i.commissionPerc,"% commission"]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-400",children:["â‚¹",Number(i.amount).toLocaleString()]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${i.status==="paid"?"bg-green-500/20 text-green-400":i.status==="approved"?"bg-blue-500/20 text-blue-400":i.status==="rejected"?"bg-red-500/20 text-red-400":"bg-yellow-500/20 text-yellow-400"}`,children:i.status}),e.jsx("span",{className:"text-xs text-muted",children:new Date(i.date).toLocaleDateString()})]})]})},P)):e.jsx("div",{className:"text-center text-muted py-12",children:"No earnings recorded yet"})})]})]}),e.jsxs("div",{className:"border-t border-white/10 p-4 md:p-6 bg-black/20 flex flex-col md:flex-row gap-3",children:[e.jsxs("button",{onClick:()=>le(d.id,$(d.id)),className:"flex-1 bg-red-500/20 text-red-500 py-3 px-6 rounded-xl font-bold hover:bg-red-500 hover:text-white transition-all flex items-center justify-center gap-2",children:[e.jsx(T,{size:18})," Delete Partner"]}),e.jsx("button",{className:"flex-1 bg-blue-500/20 text-blue-400 py-3 px-6 rounded-xl font-bold hover:bg-blue-500 hover:text-white transition-all",children:"Reset Password"}),e.jsx("button",{onClick:X,className:"flex-1 bg-white/10 text-white py-3 px-6 rounded-xl font-bold hover:bg-white/20 transition-all",children:"Close"})]})]})})})(),f&&e.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/80 flex items-center justify-center p-4 backdrop-blur-sm",onClick:()=>W(null),children:e.jsxs(F.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"bg-surface border border-white/10 w-full max-w-2xl rounded-2xl overflow-hidden max-h-[90vh] overflow-y-auto",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"p-8 border-b border-white/10 flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold font-display",children:f.fullName}),e.jsxs("p",{className:"text-sm text-accent",children:[f.status," Applicant"]})]}),e.jsx("button",{onClick:()=>W(null),className:"text-muted hover:text-white",children:e.jsx(E,{size:24})})]}),e.jsxs("div",{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white/5 p-4 rounded-xl",children:[e.jsx("h4",{className:"text-xs text-muted uppercase mb-2",children:"Contact Info"}),e.jsx("div",{className:"text-sm font-bold mb-1",children:f.email}),e.jsx("div",{className:"text-sm text-muted mb-1",children:f.phone}),e.jsx("div",{className:"text-sm text-accent",children:f.city})]}),e.jsxs("div",{className:"bg-white/5 p-4 rounded-xl",children:[e.jsx("h4",{className:"text-xs text-muted uppercase mb-2",children:"Background"}),e.jsx("div",{className:"text-sm font-bold mb-1",children:f.background}),e.jsx("div",{className:"text-sm text-muted",children:f.experience?"Prior Experience: Yes":"Prior Experience: No"})]})]}),e.jsxs("div",{className:"bg-white/5 p-4 rounded-xl",children:[e.jsx("h4",{className:"text-xs text-muted uppercase mb-2",children:"Digital Footprint"}),e.jsxs("div",{className:"space-y-2",children:[f.linkedin?e.jsxs("a",{href:f.linkedin,target:"_blank",rel:"noreferrer",className:"flex items-center gap-2 text-blue-400 hover:text-blue-300 transition-colors",children:[e.jsx(me,{size:16})," ",f.linkedin]}):e.jsx("span",{className:"text-muted italic text-sm",children:"No LinkedIn provided"}),f.social?e.jsxs("a",{href:f.social,target:"_blank",rel:"noreferrer",className:"flex items-center gap-2 text-pink-400 hover:text-pink-300 transition-colors",children:[e.jsx(he,{size:16})," ",f.social]}):e.jsx("span",{className:"text-muted italic text-sm",children:"No Social provided"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold mb-2",children:"Mission Reasoning"}),e.jsxs("div",{className:"p-4 bg-white/5 rounded-xl text-sm italic border border-white/5 text-muted",children:['"',f.reason,'"']})]}),e.jsxs("div",{className:"bg-white/5 p-4 rounded-xl",children:[e.jsx("h4",{className:"text-xs text-muted uppercase mb-2",children:"Platforms"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(re=f.platforms)==null?void 0:re.map(a=>e.jsx("span",{className:"px-2 py-1 bg-white/10 rounded text-xs",children:a},a))})]})]})]})})]})]})};export{Xe as default};
