import{c as C,u as q,r as u,j as e,M as J,A as K,m as Y,X as E}from"./index-C9T79VD3.js";import{S as j}from"./supabaseService-DZMz0YHo.js";import{U as Q}from"./users-BKTizF3Z.js";import{D as X}from"./dollar-sign-pxiaJCDo.js";import{S as Z,L as ee,T as R,B as te}from"./trash-2-Czpw_yml.js";import{C as G}from"./calendar-DQsCOmjY.js";import{T as U}from"./trending-up-DM674Du0.js";import{T as B}from"./target-CKebLERt.js";import{P as se}from"./plus-r_I8xuHa.js";import{U as ae}from"./user-BY3uis7H.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],H=C("book-open",re);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],ne=C("chart-pie",le);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],de=C("clipboard-list",ie);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],V=C("credit-card",oe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],xe=C("flame",ce);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],ue=C("info",me);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],pe=C("layout-dashboard",he);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],W=C("send",be),ge=({partnerData:o,streak:s,user:v})=>{const l=o.primary_currency==="USD"?"$":"â‚¹",[h,x]=u.useState(!1),[p,m]=u.useState([]);u.useEffect(()=>{(async()=>{const c=await j.getBroadcasts(),N=JSON.parse(localStorage.getItem("cleared_notifications")||"[]");m(c.filter(O=>!N.includes(O.id)))})()},[]);const w=r=>{const c=JSON.parse(localStorage.getItem("cleared_notifications")||"[]");localStorage.setItem("cleared_notifications",JSON.stringify([...c,r])),m(p.filter(N=>N.id!==r))},b=o.outreachLogs||[],a=b.map(r=>r.interested).reduce((r,c)=>r+c,0),i=b.filter(r=>r.medium==="Instagram"),g=b.filter(r=>r.medium==="LinkedIn"),z=i.reduce((r,c)=>r+c.interested,0),_=g.reduce((r,c)=>r+c.interested,0),T=Math.max(1,a),y=z/T*100,k=_/T*100,I=5e4,P=o.earningsHistory||[],F=P.filter(r=>r.status==="paid").reduce((r,c)=>r+Number(c.amount),0),$=P.filter(r=>r.status==="approved").reduce((r,c)=>r+Number(c.amount),0),t=P.filter(r=>r.status==="pending").reduce((r,c)=>r+Number(c.amount),0),n=F+$+t,M=Math.min(100,n/I*100);return e.jsxs("div",{className:"space-y-8 animate-fade-in relative",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-display font-bold",children:"Growth Partner Program"}),e.jsxs("p",{className:"text-muted",children:["Welcome back, ",v==null?void 0:v.name.split(" ")[0],". You are on a ",e.jsxs("span",{className:"text-orange-500 font-bold flex inline-flex items-center gap-1",children:[e.jsx(xe,{size:16,fill:"currentColor"})," ",s," day streak!"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 relative",children:[e.jsxs("button",{onClick:()=>x(!h),className:"w-10 h-10 rounded-full bg-surface border border-white/10 flex items-center justify-center text-muted hover:text-white hover:bg-white/5 transition-colors relative",children:[e.jsx(te,{size:20}),p.length>0&&e.jsx("div",{className:"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full animate-pulse border border-surface"})]}),e.jsx(K,{children:h&&e.jsxs(Y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"absolute top-12 right-0 w-80 bg-[#0f0f12] border border-white/10 rounded-xl shadow-xl z-50 p-4 max-h-64 overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h4",{className:"font-bold text-sm",children:"Notifications"}),e.jsx("button",{onClick:()=>x(!1),children:e.jsx(E,{size:14,className:"text-muted hover:text-white"})})]}),e.jsx("div",{className:"space-y-2",children:p.length===0?e.jsx("div",{className:"text-center text-xs text-muted py-4",children:"No new notifications"}):p.map(r=>e.jsxs("div",{className:"bg-white/5 p-3 rounded-lg text-xs border-l-2 border-accent relative group",children:[e.jsx("button",{onClick:()=>w(r.id),className:"absolute top-2 right-2 text-muted hover:text-white opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(E,{size:12})}),e.jsx("div",{className:"font-bold mb-1 pr-4",children:r.title}),e.jsx("div",{className:"text-muted mb-2",children:r.message}),e.jsx("div",{className:"text-[10px] text-muted opacity-50",children:new Date(r.created_at).toLocaleDateString()})]},r.id))})]})}),e.jsxs("div",{className:"flex items-center gap-2 bg-surface border border-white/10 px-4 py-2 rounded-full",children:[e.jsx("div",{className:"text-xs font-bold text-muted uppercase tracking-wider",children:"Current Tier"}),e.jsx("div",{className:"text-accent font-bold",children:o.stage})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-surface border border-white/5 p-5 rounded-2xl relative overflow-hidden group hover:border-white/10 transition-colors",children:[e.jsx("div",{className:"absolute right-0 top-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity",children:e.jsx(W,{size:80})}),e.jsx("div",{className:"text-muted text-xs uppercase tracking-wider mb-2",children:"Total Outreach"}),e.jsx("div",{className:"text-3xl font-bold",children:b.reduce((r,c)=>r+c.count,0)}),e.jsxs("div",{className:"text-xs text-green-400 mt-1 flex items-center gap-1",children:[e.jsx(U,{size:12})," Top performer"]})]}),e.jsxs("div",{className:"bg-surface border border-white/5 p-5 rounded-2xl relative overflow-hidden group hover:border-white/10 transition-colors",children:[e.jsx("div",{className:"absolute right-0 top-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity",children:e.jsx(B,{size:80})}),e.jsx("div",{className:"text-muted text-xs uppercase tracking-wider mb-2",children:"Total Leads"}),e.jsx("div",{className:"text-3xl font-bold text-white",children:a}),e.jsxs("div",{className:"text-xs text-muted mt-1",children:["Avg ",(a/Math.max(1,b.length)).toFixed(1)," per day"]})]}),e.jsxs("div",{className:"bg-surface border border-white/5 p-5 rounded-2xl relative overflow-hidden group hover:border-white/10 transition-colors",children:[e.jsx("div",{className:"absolute right-0 top-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity",children:e.jsx(G,{size:80})}),e.jsx("div",{className:"text-muted text-xs uppercase tracking-wider mb-2",children:"Booked Calls"}),e.jsx("div",{className:"text-3xl font-bold text-blue-400",children:b.reduce((r,c)=>r+(c.appointments_booked||0),0)})]}),e.jsxs("div",{className:"bg-surface border border-white/5 p-5 rounded-2xl relative overflow-hidden group hover:border-white/10 transition-colors",children:[e.jsx("div",{className:"absolute right-0 top-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity",children:e.jsx(V,{size:80})}),e.jsx("div",{className:"text-muted text-xs uppercase tracking-wider mb-2",children:"Pipeline Value"}),e.jsxs("div",{className:"text-3xl font-bold text-yellow-400",children:[l,n]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"bg-surface border border-white/5 p-6 rounded-3xl flex flex-col items-center justify-center relative",children:[e.jsxs("h3",{className:"w-full font-bold text-left mb-4 flex items-center gap-2 text-sm text-muted uppercase tracking-wider",children:[e.jsx(B,{size:16})," Monthly Goal"]}),e.jsxs("div",{className:"relative w-48 h-48 flex items-center justify-center",children:[e.jsxs("svg",{className:"w-full h-full -rotate-90",children:[e.jsx("circle",{cx:"96",cy:"96",r:"88",className:"stroke-white/5",strokeWidth:"12",fill:"none"}),e.jsx("circle",{cx:"96",cy:"96",r:"88",className:"stroke-accent transition-all duration-1000 ease-out",strokeWidth:"12",fill:"none",strokeDasharray:553,strokeDashoffset:553-553*M/100,strokeLinecap:"round"})]}),e.jsxs("div",{className:"absolute flex flex-col items-center",children:[e.jsxs("span",{className:"text-3xl font-bold font-display",children:[Math.round(M),"%"]}),e.jsxs("span",{className:"text-xs text-muted",children:["of ",l,"50k Goal"]})]})]}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsxs("div",{className:"text-sm font-bold text-white",children:[l,n.toLocaleString()," / ",l,"50,000"]}),e.jsx("div",{className:"text-xs text-muted",children:"Keep pushing! You're doing great."})]})]}),e.jsxs("div",{className:"bg-surface border border-white/5 p-6 rounded-3xl flex flex-col justify-between",children:[e.jsxs("h3",{className:"font-bold mb-6 flex items-center gap-2 text-sm text-muted uppercase tracking-wider",children:[e.jsx(ne,{size:16})," Lead Sources"]}),e.jsxs("div",{className:"flex flex-col xl:flex-row items-center gap-8 h-full justify-center",children:[e.jsx("div",{className:"w-32 h-32 rounded-full shrink-0 relative",style:{background:`conic-gradient(#A855F7 0% ${y}%, #3B82F6 ${y}% ${y+k}%, #22c55e ${y+k}% 100%)`},children:e.jsx("div",{className:"absolute inset-4 bg-surface rounded-full"})}),e.jsxs("div",{className:"space-y-3 text-sm flex-1 w-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-2 rounded hover:bg-white/5 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-purple-500"})," Instagram"]}),e.jsxs("div",{className:"font-bold",children:[Math.round(y),"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 rounded hover:bg-white/5 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"})," LinkedIn"]}),e.jsxs("div",{className:"font-bold",children:[Math.round(k),"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 rounded hover:bg-white/5 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"})," Other"]}),e.jsxs("div",{className:"font-bold",children:[Math.round(100-(y+k)),"%"]})]})]})]})]}),e.jsxs("div",{className:"bg-surface border border-white/5 p-6 rounded-3xl flex flex-col",children:[e.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2 text-sm text-muted uppercase tracking-wider",children:[e.jsx(U,{size:16})," 14-Day Trend"]}),e.jsxs("div",{className:"flex-1 flex items-end gap-2 h-full min-h-[150px]",children:[b.slice(0,7).reverse().map((r,c)=>{const N=Math.min(100,r.count/50*100);return e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1 group h-full justify-end",children:[e.jsx("div",{className:"w-full bg-white/10 rounded-t-lg transition-all group-hover:bg-accent relative",style:{height:`${N}%`}}),e.jsx("div",{className:"text-[10px] text-muted",children:new Date(r.date).getDate()})]},c)}),b.length===0&&e.jsx("div",{className:"w-full h-full flex items-center justify-center text-muted text-xs",children:"Not enough data"})]})]})]})]})},fe=({user:o})=>{const[s,v]=u.useState([]),[l,h]=u.useState(!1),[x,p]=u.useState({business_name:"",contact_person:"",source_platform:"Instagram",status:"Contacted",notes:"",appointment_date:""});u.useEffect(()=>{m()},[]);const m=async()=>{if(o!=null&&o.partnerId){console.log("Loading leads for partner:",o.partnerId);try{const a=await j.getLeads(o.partnerId);console.log("Leads loaded:",a),v(a||[])}catch(a){console.error("Error loading leads:",a),v([])}}else console.error("No partnerId found:",o)},w=async a=>{if(a.preventDefault(),!(o!=null&&o.partnerId)){alert("Error: No partner ID found. Please log out and log back in.");return}try{console.log("Saving lead:",x);const i=await j.addLead({...x,partner_id:o.partnerId,appointment_date:x.appointment_date?new Date(x.appointment_date).toISOString():null});if(i.error){console.error("Error saving lead:",i.error),alert("Failed to save lead: "+i.error.message);return}console.log("Lead saved successfully:",i.data),alert("Lead added successfully!"),h(!1),p({business_name:"",contact_person:"",source_platform:"Instagram",status:"Contacted",notes:"",appointment_date:""}),m()}catch(i){console.error("Exception saving lead:",i),alert("Failed to save lead: "+(i.message||"Unknown error"))}},b=async a=>{if(!confirm("Delete this lead?"))return;const i=await j.deleteLead(a);i.success?(alert("Lead deleted successfully!"),m()):alert(i.error||"Failed to delete lead")};return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-display font-bold",children:"My Leads"}),e.jsx("p",{className:"text-muted",children:"Track every potential deal."})]}),e.jsxs("button",{onClick:()=>h(!0),className:"bg-accent text-background px-4 py-2 rounded-lg font-bold flex items-center gap-2 hover:bg-white",children:[e.jsx(se,{size:18})," Add Lead"]})]}),l&&e.jsxs("form",{onSubmit:w,className:"bg-surface border border-white/10 p-6 rounded-xl space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("input",{required:!0,placeholder:"Business Name",value:x.business_name,onChange:a=>p({...x,business_name:a.target.value}),className:"bg-background border border-white/10 p-3 rounded-lg w-full"}),e.jsx("input",{placeholder:"Contact Person",value:x.contact_person,onChange:a=>p({...x,contact_person:a.target.value}),className:"bg-background border border-white/10 p-3 rounded-lg w-full"}),e.jsxs("select",{value:x.source_platform,onChange:a=>p({...x,source_platform:a.target.value}),className:"bg-background border border-white/10 p-3 rounded-lg w-full",children:[e.jsx("option",{children:"Instagram"}),e.jsx("option",{children:"LinkedIn"}),e.jsx("option",{children:"Email"}),e.jsx("option",{children:"WhatsApp"}),e.jsx("option",{children:"Other"})]}),e.jsxs("select",{value:x.status,onChange:a=>p({...x,status:a.target.value}),className:"bg-background border border-white/10 p-3 rounded-lg w-full",children:[e.jsx("option",{children:"Contacted"}),e.jsx("option",{children:"Booked Call"}),e.jsx("option",{children:"Proposal Sent"}),e.jsx("option",{children:"Converted"}),e.jsx("option",{children:"Lost"})]}),e.jsx("textarea",{placeholder:"Notes...",value:x.notes,onChange:a=>p({...x,notes:a.target.value}),className:"bg-background border border-white/10 p-3 rounded-lg w-full md:col-span-2"})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>h(!1),className:"text-muted",children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-accent text-background px-6 py-2 rounded-lg font-bold",children:"Save Lead"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted mb-4",children:"ðŸ’¡ Leads can be deleted within 1 hour of entry"}),e.jsx("div",{className:"grid gap-4",children:s.length===0?e.jsx("div",{className:"text-center text-muted py-10",children:"No leads added yet."}):s.map(a=>{const i=a.created_at?new Date(a.created_at):new Date,_=(new Date().getTime()-i.getTime())/(1e3*60*60)<=1;return e.jsxs("div",{className:"bg-surface border border-white/5 p-4 rounded-xl flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-lg",children:a.business_name}),e.jsxs("div",{className:"text-sm text-muted",children:[a.contact_person," â€¢ ",a.source_platform]}),a.notes&&e.jsxs("div",{className:"text-xs text-muted mt-1 italic",children:['"',a.notes,'"']})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase ${a.status.toLowerCase().includes("converted")?"bg-green-500/20 text-green-500":a.status.toLowerCase().includes("lost")?"bg-red-500/20 text-red-500":"bg-blue-500/20 text-blue-500"}`,children:a.status}),_&&e.jsx("button",{onClick:()=>b(a.id),className:"p-2 bg-red-500/10 text-red-400 rounded hover:bg-red-500/20 transition-colors",title:"Delete lead",children:e.jsx(R,{size:16})})]})]},a.id)})})]})]})},je=()=>e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsx("h2",{className:"text-3xl font-display font-bold",children:"Resources"}),e.jsx("div",{className:"grid gap-4",children:["Outreach Scripts","Qualification Checklist","Call Etiquette Guide","FAQ"].map(o=>e.jsxs("div",{className:"bg-surface border border-white/10 p-6 rounded-xl flex justify-between items-center hover:bg-white/5 transition-colors cursor-pointer group",children:[e.jsx("span",{className:"font-bold text-lg",children:o}),e.jsx(H,{className:"text-muted group-hover:text-accent transition-colors",size:20})]},o))}),e.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 p-6 rounded-xl",children:[e.jsx("h3",{className:"font-bold text-blue-400 mb-2",children:"Internal Announcements"}),e.jsx("p",{className:"text-sm text-muted",children:"Welcome to the new portal! Please update your profile details and banking information to ensure smooth payouts."})]})]}),ve=({user:o,partnerData:s,refresh:v})=>{var p,m,w,b;const[l,h]=u.useState({phone:(s==null?void 0:s.phone)||"",location:(s==null?void 0:s.location)||"",timezone:(s==null?void 0:s.timezone)||"IST",primary_currency:(s==null?void 0:s.primary_currency)||"INR",upiId:((p=s==null?void 0:s.bankDetails)==null?void 0:p.upiId)||"",bankName:((m=s==null?void 0:s.bankDetails)==null?void 0:m.bankName)||"",accountNumber:((w=s==null?void 0:s.bankDetails)==null?void 0:w.accountNumber)||"",ifsc:((b=s==null?void 0:s.bankDetails)==null?void 0:b.ifsc)||""}),x=async a=>{a.preventDefault(),await j.updatePartnerDetails(o.partnerId,{phone:l.phone,timezone:l.timezone,primary_currency:l.primary_currency}),await j.updateBankDetails(o.partnerId,{upiId:l.upiId,bankName:l.bankName,accountNumber:l.accountNumber,ifsc:l.ifsc}),alert("Settings Saved!"),v()};return e.jsxs("div",{className:"space-y-6 animate-fade-in max-w-2xl",children:[e.jsx("h2",{className:"text-3xl font-display font-bold",children:"Profile & Settings"}),e.jsxs("form",{onSubmit:x,className:"space-y-8",children:[e.jsxs("div",{className:"bg-surface border border-white/10 p-6 rounded-xl space-y-4",children:[e.jsxs("h3",{className:"font-bold flex items-center gap-2",children:[e.jsx(ae,{size:18})," Personal Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted",children:"Full Name"}),e.jsx("input",{disabled:!0,value:o.name,className:"w-full bg-white/5 border border-white/10 rounded p-2 text-muted cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted",children:"Email"}),e.jsx("input",{disabled:!0,value:o.email,className:"w-full bg-white/5 border border-white/10 rounded p-2 text-muted cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted",children:"Phone Number"}),e.jsx("input",{value:l.phone,onChange:a=>h({...l,phone:a.target.value}),className:"w-full bg-background border border-white/10 rounded p-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted",children:"Timezone"}),e.jsxs("select",{value:l.timezone,onChange:a=>h({...l,timezone:a.target.value}),className:"w-full bg-background border border-white/10 rounded p-2 text-white",children:[e.jsx("option",{children:"IST (India)"}),e.jsx("option",{children:"EST (US)"}),e.jsx("option",{children:"PST (US)"}),e.jsx("option",{children:"GMT (UK)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted",children:"Primary Currency"}),e.jsxs("select",{value:l.primary_currency,onChange:a=>h({...l,primary_currency:a.target.value}),className:"w-full bg-background border border-white/10 rounded p-2 text-white",children:[e.jsx("option",{value:"INR",children:"INR (â‚¹)"}),e.jsx("option",{value:"USD",children:"USD ($)"})]})]})]})]}),e.jsxs("div",{className:"bg-surface border border-white/10 p-6 rounded-xl space-y-4",children:[e.jsxs("h3",{className:"font-bold flex items-center gap-2",children:[e.jsx(V,{size:18})," Banking Details"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted",children:"UPI ID"}),e.jsx("input",{value:l.upiId,onChange:a=>h({...l,upiId:a.target.value}),className:"w-full bg-background border border-white/10 rounded p-2",placeholder:"user@upi"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted",children:"Bank Name"}),e.jsx("input",{value:l.bankName,onChange:a=>h({...l,bankName:a.target.value}),className:"w-full bg-background border border-white/10 rounded p-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted",children:"IFSC / Code"}),e.jsx("input",{value:l.ifsc,onChange:a=>h({...l,ifsc:a.target.value}),className:"w-full bg-background border border-white/10 rounded p-2"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted",children:"Account Number"}),e.jsx("input",{value:l.accountNumber,onChange:a=>h({...l,accountNumber:a.target.value}),className:"w-full bg-background border border-white/10 rounded p-2"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",className:"bg-accent text-background px-8 py-3 rounded-lg font-bold hover:bg-white transition-colors",children:"Save Changes"})})]})]})},Me=()=>{const o=q(),[s,v]=u.useState(null),[l,h]=u.useState(null),[x,p]=u.useState(!0),[m,w]=u.useState("overview"),[b,a]=u.useState(!1),[i,g]=u.useState({medium:"Instagram",count:0,replies:0,interested:0,appointments_booked:0,notes:"",date:new Date().toISOString().split("T")[0],location:"",niche:""}),[z,_]=u.useState(0),[T,y]=u.useState(0);u.useEffect(()=>{(async()=>{const n=await j.getCurrentUser();if(!n||n.role!=="partner"){o("/growth-partner/login");return}v(n),n.partnerId&&(await I(n.partnerId),await k(n.partnerId))})()},[o]);const k=async t=>{const n=await j.checkStreakStatus(t);_(n.currentStreak),y(n.longestStreak),n.streakBroken&&n.previousStreak>0&&setTimeout(()=>{alert(`ðŸ’” Oh no! You broke your ${n.previousStreak}-day streak!

Don't worry, you can start fresh today. Keep logging daily to build a new streak! ðŸ”¥`)},1e3)},I=async t=>{const n=await j.getPartnerData(t);h(n),p(!1)},P=async()=>{await j.logout(),o("/growth-partner/login")},F=async t=>{if(t.preventDefault(),!(s!=null&&s.partnerId))return;const n=await j.logOutreach(s.partnerId,{...i,date:new Date(i.date).toISOString()});n&&n.success?(alert("Daily log submitted successfully!"),await I(s.partnerId),await k(s.partnerId),w("overview")):(alert("Failed to submit daily log: "+((n==null?void 0:n.error)||"Unknown error. Please try again.")),console.error("Log submission error:",n))};if(l==null||l.primary_currency,x||!l)return e.jsxs("div",{className:"min-h-screen bg-black flex flex-col items-center justify-center text-white space-y-4",children:[e.jsx("div",{className:"text-4xl font-display font-bold text-transparent bg-clip-text bg-gradient-to-r from-white to-white/50 animate-pulse",children:"Frame n Flow Media"}),e.jsx("div",{className:"text-accent text-sm font-mono tracking-widest uppercase animate-pulse",children:"Loading GPP..."})]});const $=[{id:"overview",label:"Overview",icon:pe},{id:"log",label:"Daily Log",icon:de},{id:"leads",label:"My Leads",icon:Q},{id:"earnings",label:"Earnings",icon:X},{id:"resources",label:"Resources",icon:H},{id:"profile",label:"Settings",icon:Z}];return e.jsxs("div",{className:"min-h-screen bg-background font-sans text-white flex",children:[e.jsxs("div",{className:"fixed top-0 w-full md:hidden bg-background/90 backdrop-blur z-50 border-b border-white/5 flex items-center justify-between p-4",children:[e.jsx("div",{className:"font-bold font-display",children:"Frame n Flow"}),e.jsx("button",{onClick:()=>a(!b),children:e.jsx(J,{})})]}),e.jsx("aside",{className:`fixed md:relative inset-y-0 left-0 w-64 bg-[#0a0a0a] border-r border-white/5 transform transition-transform z-40 ${b?"translate-x-0":"-translate-x-full"} md:translate-x-0 bg-gradient-to-b from-black via-black to-accent/5`,children:e.jsxs("div",{className:"p-6 h-full flex flex-col",children:[e.jsxs("div",{className:"mb-10 hidden md:block",children:[e.jsxs("div",{className:"font-bold text-xl font-display tracking-tight",children:["Frame n Flow ",e.jsx("span",{className:"text-accent",children:"Media"})]}),e.jsx("div",{className:"text-xs text-muted mt-1 uppercase tracking-widest pl-1",children:"GPP"})]}),e.jsx("nav",{className:"space-y-2 flex-1 pt-12 md:pt-0",children:$.map(t=>e.jsxs("button",{onClick:()=>{w(t.id),a(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${m===t.id?"bg-accent/10 text-accent font-bold":"text-muted hover:bg-white/5 hover:text-white"}`,children:[e.jsx(t.icon,{size:20})," ",t.label]},t.id))}),e.jsxs("div",{className:"pt-6 border-t border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 px-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-accent text-background flex items-center justify-center font-bold",children:s==null?void 0:s.name.charAt(0)}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-bold",children:s==null?void 0:s.name.split(" ")[0]}),e.jsx("div",{className:"text-xs text-muted",children:l.gpId||`GP-${s==null?void 0:s.id.slice(0,4)}`})]})]}),e.jsxs("button",{onClick:P,className:"w-full flex items-center gap-2 text-red-400 hover:text-red-300 px-2 py-2 text-sm transition-colors",children:[e.jsx(ee,{size:16})," Sign Out"]})]})]})}),e.jsx("main",{className:"flex-1 min-h-screen pt-20 md:pt-0 overflow-y-auto",children:e.jsxs("div",{className:"max-w-5xl mx-auto p-6 md:p-12",children:[m==="overview"&&e.jsx(ge,{partnerData:l,streak:z,user:s}),m==="leads"&&e.jsx(fe,{user:s}),m==="resources"&&e.jsx(je,{}),m==="profile"&&e.jsx(ve,{user:s,partnerData:l,refresh:()=>I(s==null?void 0:s.partnerId)}),m==="earnings"&&(()=>{const t=(l==null?void 0:l.primary_currency)==="USD"?"$":"â‚¹",n=l.earningsHistory||[],M=n.filter(d=>d.status==="pending").reduce((d,f)=>d+(Number(f.amount)||0),0),r=n.filter(d=>d.status==="approved").reduce((d,f)=>d+(Number(f.amount)||0),0),c=n.filter(d=>d.status==="paid").reduce((d,f)=>d+(Number(f.amount)||0),0),N=r+c,D=(()=>{const d={};n.forEach(S=>{const L=new Date(S.date).toLocaleString("default",{month:"short"});d[L]=(d[L]||0)+Number(S.amount)});const f=[];for(let S=5;S>=0;S--){const L=new Date;L.setMonth(L.getMonth()-S);const A=L.toLocaleString("default",{month:"short"});f.push({label:A,value:d[A]||0})}return f})();return e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsx("h2",{className:"text-3xl font-display font-bold",children:"Earnings & Commissions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-surface p-6 rounded-xl border border-white/5",children:[e.jsx("div",{className:"text-xs text-muted mb-1 uppercase tracking-wider",children:"Total Earnings"}),e.jsxs("div",{className:"text-2xl font-bold font-mono",children:[t,N.toLocaleString()]})]}),e.jsxs("div",{className:"bg-surface p-6 rounded-xl border border-white/5",children:[e.jsx("div",{className:"text-xs text-green-500 mb-1 uppercase tracking-wider",children:"Paid Out"}),e.jsxs("div",{className:"text-2xl font-bold font-mono text-green-400",children:[t,c.toLocaleString()]})]}),e.jsxs("div",{className:"bg-surface p-6 rounded-xl border border-white/5",children:[e.jsx("div",{className:"text-xs text-blue-500 mb-1 uppercase tracking-wider",children:"Approved (Unpaid)"}),e.jsxs("div",{className:"text-2xl font-bold font-mono text-blue-400",children:[t,r.toLocaleString()]})]}),e.jsxs("div",{className:"bg-surface p-6 rounded-xl border border-white/5",children:[e.jsx("div",{className:"text-xs text-yellow-500 mb-1 uppercase tracking-wider",children:"Pending Approval"}),e.jsxs("div",{className:"text-2xl font-bold font-mono text-yellow-400",children:[t,M.toLocaleString()]})]})]}),e.jsxs("div",{className:"bg-blue-500/5 p-4 rounded-xl border border-blue-500/10 text-xs text-blue-200 flex items-center gap-2",children:[e.jsx(ue,{size:16}),' Commissions are reviewed weekly. "Pending" amounts are estimates based on booked deals and may change upon final verification.']}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-surface border border-white/5 p-6 rounded-xl",children:[e.jsx("h4",{className:"font-bold mb-6 text-xs uppercase text-muted tracking-wider",children:"Monthly Performance"}),e.jsx("div",{className:"flex items-end justify-between h-40 gap-2",children:D.map((d,f)=>{const S=Math.max(...D.map(A=>A.value),1),L=d.value/S*100;return e.jsxs("div",{className:"flex flex-col items-center gap-2 flex-1 group w-full",children:[e.jsx("div",{className:"text-[10px] text-white/40 group-hover:text-white transition-colors mb-1",children:d.value>0?`${(d.value/1e3).toFixed(1)}k`:""}),e.jsx("div",{className:"w-full max-w-[30px] rounded-t bg-gradient-to-t from-green-500/20 to-green-500/60 hover:to-green-400 transition-all relative",style:{height:`${L}%`,minHeight:"4px"}}),e.jsx("div",{className:"text-[10px] text-muted font-bold uppercase",children:d.label})]},f)})})]}),e.jsxs("div",{className:"bg-surface border border-white/5 p-6 rounded-xl",children:[e.jsx("h4",{className:"font-bold mb-6 text-xs uppercase text-muted tracking-wider",children:"Deal Composition"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/5 rounded-lg",children:[e.jsx("span",{className:"text-sm",children:"Paid Deals"}),e.jsx("span",{className:"font-mono",children:n.filter(d=>d.status==="paid").length})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/5 rounded-lg",children:[e.jsx("span",{className:"text-sm",children:"Avg. Commission"}),e.jsx("span",{className:"font-mono",children:n.length>0?t+Math.round(n.reduce((d,f)=>d+Number(f.amount),0)/n.length).toLocaleString():"0"})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/5 rounded-lg",children:[e.jsx("span",{className:"text-sm",children:"Pending Review"}),e.jsx("span",{className:"font-mono text-yellow-400",children:n.filter(d=>d.status==="pending").length})]})]})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Payout History"}),e.jsx("div",{className:"bg-surface border border-white/5 rounded-xl overflow-hidden",children:n.length>0?e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-white/5 text-muted uppercase text-xs",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:"Date"}),e.jsx("th",{className:"p-4",children:"Client / Deal"}),e.jsx("th",{className:"p-4",children:"Val"}),e.jsx("th",{className:"p-4 text-center",children:"%"}),e.jsx("th",{className:"p-4 text-right",children:"Commission"}),e.jsx("th",{className:"p-4 text-center",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-white/5",children:n.map(d=>e.jsxs("tr",{className:"hover:bg-white/5 transition-colors",children:[e.jsx("td",{className:"p-4 text-muted text-xs",children:new Date(d.date).toLocaleDateString()}),e.jsxs("td",{className:"p-4",children:[e.jsx("div",{className:"font-bold",children:d.clientName}),e.jsx("div",{className:"text-[10px] text-muted uppercase",children:d.serviceType||"Service"})]}),e.jsxs("td",{className:"p-4 text-xs font-mono opacity-70",children:["â‚¹",Number(d.dealValue).toLocaleString()]}),e.jsxs("td",{className:"p-4 text-xs text-center",children:[d.commissionPerc||20,"%"]}),e.jsxs("td",{className:"p-4 text-right font-mono font-bold text-green-400",children:[t,Number(d.amount).toLocaleString()]}),e.jsx("td",{className:"p-4 text-center",children:e.jsx("span",{className:`px-2 py-1 rounded text-[10px] uppercase font-bold border ${d.status==="paid"?"bg-green-500/10 border-green-500/20 text-green-500":d.status==="approved"?"bg-blue-500/10 border-blue-500/20 text-blue-500":d.status==="rejected"?"bg-red-500/10 border-red-500/20 text-red-500":"bg-yellow-500/10 border-yellow-500/20 text-yellow-500"}`,children:d.status})})]},d.id))})]}):e.jsx("div",{className:"p-8 text-center text-muted",children:"No payout history available yet."})})]})]})})(),m==="log"&&e.jsxs("div",{className:"max-w-2xl animate-fade-in space-y-6",children:[e.jsx("h2",{className:"text-3xl font-display font-bold",children:"Daily Activity Log"}),e.jsx("div",{className:"bg-surface border border-white/10 rounded-2xl p-8",children:e.jsxs("form",{onSubmit:F,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-muted uppercase",children:"Date"}),e.jsx("input",{type:"date",value:i.date,onChange:t=>g({...i,date:t.target.value}),className:"w-full bg-background border border-white/10 rounded-lg p-3 text-white scheme-dark mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-muted uppercase",children:"Platform"}),e.jsx("select",{value:i.medium,onChange:t=>g({...i,medium:t.target.value}),className:"w-full bg-background border border-white/10 rounded-lg p-3 mt-1",children:["Instagram","LinkedIn","WhatsApp","Email","Calls"].map(t=>e.jsx("option",{children:t},t))})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-muted uppercase",children:"Sent"}),e.jsx("input",{type:"number",min:"0",value:i.count===0?"":i.count,onChange:t=>g({...i,count:parseInt(t.target.value)||0}),className:"w-full bg-background border border-white/10 rounded-lg p-3 mt-1 text-center font-mono"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-muted uppercase",children:"Replies"}),e.jsx("input",{type:"number",min:"0",value:i.replies===0?"":i.replies,onChange:t=>g({...i,replies:parseInt(t.target.value)||0}),className:"w-full bg-background border border-white/10 rounded-lg p-3 mt-1 text-center font-mono"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-green-400 uppercase",children:"Leads"}),e.jsx("input",{type:"number",min:"0",value:i.interested===0?"":i.interested,onChange:t=>g({...i,interested:parseInt(t.target.value)||0}),className:"w-full bg-background border border-green-500/20 rounded-lg p-3 mt-1 text-center font-mono text-green-400 font-bold"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-blue-400 uppercase",children:"Appointments Booked"}),e.jsx("input",{type:"number",min:"0",value:i.appointments_booked===0?"":i.appointments_booked,onChange:t=>g({...i,appointments_booked:parseInt(t.target.value)||0}),className:"w-full bg-background border border-blue-500/20 rounded-lg p-3 mt-1 text-center font-mono text-blue-400 font-bold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-muted uppercase",children:"Target Location & Niche"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-1",children:[e.jsx("input",{placeholder:"City, Country",value:i.location,onChange:t=>g({...i,location:t.target.value}),className:"w-full bg-background border border-white/10 rounded-lg p-3 text-sm"}),e.jsx("input",{placeholder:"Niche (e.g. Realtors)",value:i.niche,onChange:t=>g({...i,niche:t.target.value}),className:"w-full bg-background border border-white/10 rounded-lg p-3 text-sm"})]})]}),e.jsx("textarea",{placeholder:"Notes / Observations...",value:i.notes,onChange:t=>g({...i,notes:t.target.value}),className:"w-full bg-background border border-white/10 rounded-lg p-3 h-24"}),e.jsx("button",{type:"submit",className:"w-full bg-accent text-background font-bold py-4 rounded-xl hover:bg-white transition-colors",children:"Submit Daily Log"})]})}),e.jsxs("div",{className:"space-y-4 pt-4 pb-20",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-xl",children:"Recent Logs"}),e.jsx("p",{className:"text-xs text-muted mt-1",children:"ðŸ’¡ Logs can be edited or deleted within 1 hour of entry"})]}),l.outreachLogs.length===0?e.jsx("div",{className:"text-center text-muted italic",children:"No logs found."}):l.outreachLogs.slice(0,20).map(t=>{const n=t.created_at?new Date(t.created_at):new Date(t.date),r=(new Date().getTime()-n.getTime())/(1e3*60*60),c=r<=1;return console.log("Log:",{id:t.id,date:t.date,created_at:t.created_at,createdAtParsed:n,hoursSinceCreation:r,canEdit:c}),e.jsxs("div",{className:"bg-surface border border-white/5 p-4 rounded-xl flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white/5 rounded-lg flex items-center justify-center text-muted",children:["Instagram","LinkedIn"].includes(t.medium)?e.jsx(W,{size:18}):e.jsx(G,{size:18})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-sm",children:new Date(t.date).toLocaleDateString()}),e.jsxs("div",{className:"text-xs text-muted",children:[t.medium," â€¢ ",t.count," sent"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-xs text-green-400 font-bold",children:[t.interested," Leads"]}),e.jsxs("div",{className:"text-[10px] text-muted",children:[t.appointments_booked||0," Booked"]})]}),c&&e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{onClick:async()=>{if(confirm("Delete this log?")){const N=await j.deleteOutreachLog(t.id);N.success?(alert("Log deleted successfully!"),s!=null&&s.partnerId&&(await I(s.partnerId),await k(s.partnerId))):alert(N.error||"Failed to delete log")}},className:"p-2 bg-red-500/10 text-red-400 rounded hover:bg-red-500/20 transition-colors",title:"Delete log",children:e.jsx(R,{size:14})})})]})]},t.id)})]})]})]})})]})};export{Me as default};
